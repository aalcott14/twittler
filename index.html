<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="styles.css"></link>
    <title>Twittler</title>
  </head>
  <body>
    
    <header>
      <h1>Welcome to Twittler</h1>
      <h3>What are your friends doing?</h3>
    </header>

    <div class='look'>
      <p id='lookStart'>Let's have a look...</p>
      <button type='button' class='home'>Refresh tweets!</button>
    </div>
    
    
    <script>
      $(document).ready(function(){
        var $body = $('body');
        var index = streams.home.length - 1;
        var timeline = true;
        
        $('.home').on('click', function() {
          location.reload();
        })

        function currentTweets() {
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweetWindow = $("<button type='button' class='tweetWindow'></button>");
            var $tweetDate = $("<div class='tweetDate'></div>");
            var $tweetUser = $("<div class=" + tweet.user + "></div>")
            var $tweetMessage = $("<div class='tweetMessage'></div>");
            $tweetWindow.appendTo($body);
            $tweetUser.text('@' + tweet.user).appendTo($tweetWindow);
            $tweetDate.text('Posted ' + tweet.created_at).appendTo($tweetUser);
            $tweetMessage.text(tweet.message).appendTo($tweetUser);
            index -= 1;
          }
        }

        currentTweets();

        function userTimeline(user1, user2, user3) {
          if(timeline) {
            $(user1).parent().remove();
            $(user2).parent().remove();
            $(user3).parent().remove();
            $('.home').text('Go back to home feed');
            timeline = false;
          }
        }
        $('.tweetWindow').on('click', '.sharksforcheap', function() {
          userTimeline('.shawndrost', '.mracus', '.douglascalhoun')
        })
        $('.tweetWindow').on('click', '.douglascalhoun', function() {
          userTimeline('.shawndrost', '.mracus', '.sharksforcheap')
        })
        $('.tweetWindow').on('click', '.shawndrost', function() {
          userTimeline('.sharksforcheap', '.mracus', '.douglascalhoun')
        })
        $('.tweetWindow').on('click', '.mracus', function() {
          userTimeline('.shawndrost', '.sharksforcheap', '.douglascalhoun')
        })
        $('.tweetWindow').on('click', '.back', function() {
          $('div').remove();
          timeline = true;
          currentTweets();
        })


      });
    </script>
  </body>
</html>
